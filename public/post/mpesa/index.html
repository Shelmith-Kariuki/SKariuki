<!DOCTYPE html><html lang="en-us" >

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=4321&amp;path=livereload" data-no-instant defer></script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="">

  
  <link rel="alternate" hreflang="en-us" href="http://localhost:4321/post/mpesa/">

  


  
  
  
  <meta name="theme-color" content="#ff3860">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu14430298554559211168.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu13580473979298972273.png">

  <link rel="canonical" href="http://localhost:4321/post/mpesa/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@Shel_Kariuki">
  <meta property="twitter:creator" content="@Shel_Kariuki">
  
  <meta property="og:site_name" content="Shel Kariuki">
  <meta property="og:url" content="http://localhost:4321/post/mpesa/">
  <meta property="og:title" content="Extracting crucial details from M-Pesa text messages | Shel Kariuki">
  <meta property="og:description" content=""><meta property="og:image" content="http://localhost:4321/post/mpesa/featured.png">
  <meta property="twitter:image" content="http://localhost:4321/post/mpesa/featured.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2021-04-28T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2021-04-28T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:4321/post/mpesa/"
  },
  "headline": "Extracting crucial details from M-Pesa text messages",
  
  "image": [
    "http://localhost:4321/post/mpesa/featured.png"
  ],
  
  "datePublished": "2021-04-28T00:00:00Z",
  "dateModified": "2021-04-28T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Shel Kariuki"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Shel Kariuki",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:4321/images/icon_hu13580473979298972273.png"
    }
  },
  "description": ""
}
</script>

  

  


  


  





  <title>Extracting crucial details from M-Pesa text messages | Shel Kariuki</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Shel Kariuki</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Shel Kariuki</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/blogspage"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/projectspage"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/talkspage"><span>Talks</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/contactpage"><span>Contact</span></a>
        </li>

        
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/"><span></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Extracting crucial details from M-Pesa text messages</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Apr 28, 2021
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    19 min read
  </span>
  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="//rmarkdown-libs/header-attrs/header-attrs.js"></script>
<link href="//rmarkdown-libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="//rmarkdown-libs/anchor-sections/anchor-sections.js"></script>
<script src="//rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="//rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<p><a href="https://www.safaricom.co.ke/personal/m-pesa">M-PESA</a>, operated by <a href="https://www.safaricom.co.ke/">Safaricom</a> is a mobile money transfer service in Kenya. It is one of the best mobile payment options. One can use M-PESA to buy airtime, send or receive cash on their phones and pay goods and/or services using merchant paybill numbers or till numbers. The following is an example of an M-Pesa text message that one would receive if they paid for goods or services via a till number.</p>
<blockquote>
<p>XXXYYYZZZ10 Confirmed. Ksh700.00 paid to GEL NAIL SHOP. on 17/3/21 at 6:54 PM.New M-PESA balance is Ksh3,646.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,300.00.You can now access M-PESA via *334#</p>
</blockquote>
<p>This script details how one can extract some key details from the message for purposes of data analysis. These details include the transaction code, transaction type (purchase of airtime, cash transfer, cash withdrawal, cash deposit, pay bill payment, merchant payment (Lipa Na Mpesa)), date (including the day, month and year), time (hour, minute and time of day (morning / afternoon)) , transaction amount , transaction cost and M-Pesa balance.</p>
<p><em>Note: This data has been anonymized</em></p>
<div id="load-the-packages-required" class="section level3">
<h3>0. Load the packages required</h3>
<pre class="r"><code>
## Create a vector of packages to be installed
pkgs &lt;- c(&quot;tidyverse&quot;,&quot;lubridate&quot;, &quot;kableExtra&quot;)

## Check if there are packages you want to load, that are not already installed. 
miss_pkgs &lt;- pkgs[!pkgs %in% installed.packages()[,1]] 

## Installing the missing packages
if(length(miss_pkgs)&gt;0){
  install.packages(miss_pkgs)
}
## Loading all the packages
invisible(lapply(pkgs,library,character.only=TRUE))

## Remove the objects that are no longer required
rm(miss_pkgs)
rm(pkgs)</code></pre>
</div>
<div id="read-in-the-data" class="section level3">
<h3>1. Read in the data</h3>
<pre class="r"><code>df &lt;- read_csv(&quot;mpesa.csv - Sheet1.csv&quot;)
#&gt; Parsed with column specification:
#&gt; cols(
#&gt;   `Text message` = col_character()
#&gt; )
tab_output(df)</code></pre>
<table class="table" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
Text message
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
XXXYYYZZZ1 confirmed.You bought Ksh100.00 of airtime on 27/4/21 at 11:05 AM.New M-PESA balance is Ksh5,350.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,900.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ2 confirmed.You bought Ksh30.00 of airtime on 25/4/21 at 3:45 PM.New M-PESA balance is Ksh5,450.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,940.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ3 Confirmed. Ksh500.00 sent to KPLC PREPAID for account 123456789 on 23/4/21 at 9:57 PM New M-PESA balance is Ksh5,941.22. Transaction cost, Ksh23.00. Amount you can transact within the day is 296,283.00.
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ4 Confirmed. Ksh607.00 paid to SUPERMARKET FULANI HAPO. on 23/4/21 at 3:26 PM.New M-PESA balance is Ksh6,494.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,813.00.You can now access M-PESA via *334#
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ5 Confirmed. Ksh1,030.00 sent to MSEE FULANI HAPO +254722222222 on 23/4/21 at 2:38 PM. New M-PESA balance is Ksh7. Transaction cost, Ksh22.00. Amount you can transact within the day is 297,420.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ6 Confirmed.on 23/4/21 at 12:31 PMWithdraw Ksh1,500.00 from 010000 - Shop fulani hapo New M-PESA balance is Ksh8. Transaction cost, Ksh28.00. Amount you can transact within the day is 298,500.00.
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ9 Confirmed. Ksh80.00 sent to MSEE WA CHIPO 0704444444 on 12/4/21 at 1:57 PM. New M-PESA balance is Ksh 210. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,665.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ10 Confirmed. Ksh700.00 paid to GEL NAIL SHOP. on 17/3/21 at 6:54 PM.New M-PESA balance is Ksh3,646.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,300.00.You can now access M-PESA via *334#
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ11 Confirmed. On 25/7/20 at 3:29 PM Give Ksh2,000.00 cash to Agent fulani New M-PESA balance is Ksh2,100.22.
</td>
</tr>
</tbody>
</table>
</div>
<div id="extract-crucial-information-from-the-messages" class="section level3">
<h3>2. Extract crucial information from the messages</h3>
<div id="transaction-code" class="section level4">
<h4>2.1 Transaction code</h4>
<pre class="r"><code>df &lt;- df %&gt;% 
      mutate(trn_code = 
               gsub(&quot;confirmed.*|Confirmed.*&quot;, &quot;&quot;, `Text message`))
tab_output(df)</code></pre>
<table class="table" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
Text message
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_code
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
XXXYYYZZZ1 confirmed.You bought Ksh100.00 of airtime on 27/4/21 at 11:05 AM.New M-PESA balance is Ksh5,350.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,900.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ1
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ2 confirmed.You bought Ksh30.00 of airtime on 25/4/21 at 3:45 PM.New M-PESA balance is Ksh5,450.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,940.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ2
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ3 Confirmed. Ksh500.00 sent to KPLC PREPAID for account 123456789 on 23/4/21 at 9:57 PM New M-PESA balance is Ksh5,941.22. Transaction cost, Ksh23.00. Amount you can transact within the day is 296,283.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ3
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ4 Confirmed. Ksh607.00 paid to SUPERMARKET FULANI HAPO. on 23/4/21 at 3:26 PM.New M-PESA balance is Ksh6,494.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,813.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ4
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ5 Confirmed. Ksh1,030.00 sent to MSEE FULANI HAPO +254722222222 on 23/4/21 at 2:38 PM. New M-PESA balance is Ksh7. Transaction cost, Ksh22.00. Amount you can transact within the day is 297,420.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ5
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ6 Confirmed.on 23/4/21 at 12:31 PMWithdraw Ksh1,500.00 from 010000 - Shop fulani hapo New M-PESA balance is Ksh8. Transaction cost, Ksh28.00. Amount you can transact within the day is 298,500.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ6
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ9 Confirmed. Ksh80.00 sent to MSEE WA CHIPO 0704444444 on 12/4/21 at 1:57 PM. New M-PESA balance is Ksh 210. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,665.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ9
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ10 Confirmed. Ksh700.00 paid to GEL NAIL SHOP. on 17/3/21 at 6:54 PM.New M-PESA balance is Ksh3,646.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,300.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ10
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ11 Confirmed. On 25/7/20 at 3:29 PM Give Ksh2,000.00 cash to Agent fulani New M-PESA balance is Ksh2,100.22.
</td>
<td style="text-align:center;">
XXXYYYZZZ11
</td>
</tr>
</tbody>
</table>
</div>
<div id="transaction-type" class="section level4">
<h4>2.2 Transaction type</h4>
<pre class="r"><code>df &lt;- df %&gt;% 
  mutate(trn_type = 
           ## Purchase of airtime
           ifelse(`Text message` %in% 
                    grep(&quot;airtime&quot;, `Text message`,value = TRUE, 
                         ignore.case = TRUE), &quot;Airtime Purchase&quot;,
           ## Transfer
           ifelse(`Text message` %in% 
                    grep(&quot;sent to&quot;, `Text message`,value = TRUE, 
                         ignore.case = TRUE) &amp;
                    !`Text message` %in% 
                    grep(&quot;for account&quot;, `Text message`,value = TRUE, 
                         ignore.case = TRUE), &quot;Customer Transfer&quot;, 
           ## Withdrawal
           ifelse(`Text message` %in% 
                    grep(&quot;withdraw&quot;, `Text message`,value = TRUE, 
                         ignore.case = TRUE), &quot;Withdrawal&quot;,
           ## Deposit
           ifelse(`Text message` %in% 
                    grep(&quot;Give&quot;, `Text message`,value = TRUE, 
                         ignore.case = TRUE), &quot;Deposit&quot;,         
           ## Pay Bill Payment
           ifelse(`Text message` %in% 
                    grep(&quot;for account&quot;, `Text message`,value = TRUE, 
                         ignore.case = TRUE), &quot;Pay Bill Payment&quot;,
           ## Merchant Payment (Lipa Na Mpesa)
           ifelse(`Text message` %in% 
                    grep(&quot;paid to&quot;, `Text message`,value = TRUE, 
                         ignore.case = TRUE), &quot;Merchant Payment&quot;,&quot;&quot;)))))))
tab_output(df)</code></pre>
<table class="table" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
Text message
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_code
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
XXXYYYZZZ1 confirmed.You bought Ksh100.00 of airtime on 27/4/21 at 11:05 AM.New M-PESA balance is Ksh5,350.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,900.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ1
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ2 confirmed.You bought Ksh30.00 of airtime on 25/4/21 at 3:45 PM.New M-PESA balance is Ksh5,450.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,940.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ2
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ3 Confirmed. Ksh500.00 sent to KPLC PREPAID for account 123456789 on 23/4/21 at 9:57 PM New M-PESA balance is Ksh5,941.22. Transaction cost, Ksh23.00. Amount you can transact within the day is 296,283.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ3
</td>
<td style="text-align:center;">
Pay Bill Payment
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ4 Confirmed. Ksh607.00 paid to SUPERMARKET FULANI HAPO. on 23/4/21 at 3:26 PM.New M-PESA balance is Ksh6,494.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,813.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ4
</td>
<td style="text-align:center;">
Merchant Payment
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ5 Confirmed. Ksh1,030.00 sent to MSEE FULANI HAPO +254722222222 on 23/4/21 at 2:38 PM. New M-PESA balance is Ksh7. Transaction cost, Ksh22.00. Amount you can transact within the day is 297,420.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ5
</td>
<td style="text-align:center;">
Customer Transfer
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ6 Confirmed.on 23/4/21 at 12:31 PMWithdraw Ksh1,500.00 from 010000 - Shop fulani hapo New M-PESA balance is Ksh8. Transaction cost, Ksh28.00. Amount you can transact within the day is 298,500.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ6
</td>
<td style="text-align:center;">
Withdrawal
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ9 Confirmed. Ksh80.00 sent to MSEE WA CHIPO 0704444444 on 12/4/21 at 1:57 PM. New M-PESA balance is Ksh 210. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,665.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ9
</td>
<td style="text-align:center;">
Customer Transfer
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ10 Confirmed. Ksh700.00 paid to GEL NAIL SHOP. on 17/3/21 at 6:54 PM.New M-PESA balance is Ksh3,646.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,300.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ10
</td>
<td style="text-align:center;">
Merchant Payment
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ11 Confirmed. On 25/7/20 at 3:29 PM Give Ksh2,000.00 cash to Agent fulani New M-PESA balance is Ksh2,100.22.
</td>
<td style="text-align:center;">
XXXYYYZZZ11
</td>
<td style="text-align:center;">
Deposit
</td>
</tr>
</tbody>
</table>
</div>
<div id="date-day-month-year" class="section level4">
<h4>2.3 Date (Day, Month, Year)</h4>
<pre class="r"><code>## Date
df &lt;- df %&gt;% 
  mutate(temp = gsub(&quot;.*confirmed|.*Confirmed&quot;, &quot;&quot;, `Text message`)) %&gt;% 
  mutate(trn_date = str_match(temp, regex(&quot;on\\s*(.*?)\\s*at&quot;, 
                                          ignore_case = TRUE))[,2],
         trn_date = as.Date(trn_date, format = &#39;%d/%m/%y&#39;)) 


## Day, Month, Year
df &lt;- df %&gt;% 
  mutate(trn_day = day(trn_date),
         trn_dayofweek = wday(trn_date, label = TRUE, abbr = FALSE),
         trn_month = month(trn_date, label = TRUE, abbr = FALSE),
         trn_year = year(trn_date))
tab_output(df %&gt;% select(-temp))</code></pre>
<table class="table" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
Text message
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_code
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_type
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_date
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_day
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_dayofweek
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_month
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_year
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
XXXYYYZZZ1 confirmed.You bought Ksh100.00 of airtime on 27/4/21 at 11:05 AM.New M-PESA balance is Ksh5,350.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,900.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ1
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-27
</td>
<td style="text-align:center;">
27
</td>
<td style="text-align:center;">
Tuesday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ2 confirmed.You bought Ksh30.00 of airtime on 25/4/21 at 3:45 PM.New M-PESA balance is Ksh5,450.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,940.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ2
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Sunday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ3 Confirmed. Ksh500.00 sent to KPLC PREPAID for account 123456789 on 23/4/21 at 9:57 PM New M-PESA balance is Ksh5,941.22. Transaction cost, Ksh23.00. Amount you can transact within the day is 296,283.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ3
</td>
<td style="text-align:center;">
Pay Bill Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ4 Confirmed. Ksh607.00 paid to SUPERMARKET FULANI HAPO. on 23/4/21 at 3:26 PM.New M-PESA balance is Ksh6,494.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,813.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ4
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ5 Confirmed. Ksh1,030.00 sent to MSEE FULANI HAPO +254722222222 on 23/4/21 at 2:38 PM. New M-PESA balance is Ksh7. Transaction cost, Ksh22.00. Amount you can transact within the day is 297,420.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ5
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ6 Confirmed.on 23/4/21 at 12:31 PMWithdraw Ksh1,500.00 from 010000 - Shop fulani hapo New M-PESA balance is Ksh8. Transaction cost, Ksh28.00. Amount you can transact within the day is 298,500.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ6
</td>
<td style="text-align:center;">
Withdrawal
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ9 Confirmed. Ksh80.00 sent to MSEE WA CHIPO 0704444444 on 12/4/21 at 1:57 PM. New M-PESA balance is Ksh 210. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,665.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ9
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-12
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
Monday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ10 Confirmed. Ksh700.00 paid to GEL NAIL SHOP. on 17/3/21 at 6:54 PM.New M-PESA balance is Ksh3,646.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,300.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ10
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-03-17
</td>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
Wednesday
</td>
<td style="text-align:center;">
March
</td>
<td style="text-align:center;">
2021
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ11 Confirmed. On 25/7/20 at 3:29 PM Give Ksh2,000.00 cash to Agent fulani New M-PESA balance is Ksh2,100.22.
</td>
<td style="text-align:center;">
XXXYYYZZZ11
</td>
<td style="text-align:center;">
Deposit
</td>
<td style="text-align:center;">
2020-07-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Saturday
</td>
<td style="text-align:center;">
July
</td>
<td style="text-align:center;">
2020
</td>
</tr>
</tbody>
</table>
</div>
<div id="time-hour-minute-time-of-day-morning-afternoon" class="section level4">
<h4>2.4 Time (Hour, Minute, Time of day (morning / afternoon))</h4>
<pre class="r"><code>df &lt;- df %&gt;% 
  mutate(temp = gsub(&quot;.*confirmed|.*Confirmed&quot;, &quot;&quot;, `Text message`))%&gt;%
  mutate(trn_time = 
           str_match(temp, regex(&quot;at\\s*(.*?)\\s*New M-PESA balance&quot;, 
      ignore_case = TRUE))[,2],
        trn_time = gsub(&quot;Withdraw.*|Give.*|\\.&quot;, &quot;&quot;, trn_time), 
        trn_time) %&gt;%
  mutate(trn_timeofday = 
           ifelse(trn_time %in% grep(&quot;PM&quot;, trn_time,
                ignore.case = FALSE, value = TRUE), &quot;Afternoon&quot;,
                ifelse(trn_time %in% grep(&quot;AM&quot;, trn_time, 
                      ignore.case = FALSE, value = TRUE), &quot;Morning&quot;,&quot;&quot;))) %&gt;% 
  mutate(trn_time = trimws(gsub(&quot;AM|PM&quot;, &quot;&quot;, trn_time))) %&gt;% 
  separate(trn_time, into = c(&quot;trn_hour&quot;, &quot;trn_minute&quot;),
           sep = &quot;:&quot;, remove = FALSE) %&gt;% 
  mutate(across(c(trn_hour, trn_minute), ~as.numeric(trimws(.)))) %&gt;% 
  mutate(trn_hour = ifelse(trn_timeofday == &quot;Afternoon&quot; &amp; trn_hour!=12, 
                           trn_hour + 12, trn_hour)) %&gt;% 
  select(-temp)

tab_output(df)</code></pre>
<table class="table" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
Text message
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_code
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_type
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_date
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_day
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_dayofweek
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_month
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_year
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_time
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_hour
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_minute
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_timeofday
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
XXXYYYZZZ1 confirmed.You bought Ksh100.00 of airtime on 27/4/21 at 11:05 AM.New M-PESA balance is Ksh5,350.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,900.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ1
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-27
</td>
<td style="text-align:center;">
27
</td>
<td style="text-align:center;">
Tuesday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
11:05
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
Morning
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ2 confirmed.You bought Ksh30.00 of airtime on 25/4/21 at 3:45 PM.New M-PESA balance is Ksh5,450.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,940.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ2
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Sunday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
3:45
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
Afternoon
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ3 Confirmed. Ksh500.00 sent to KPLC PREPAID for account 123456789 on 23/4/21 at 9:57 PM New M-PESA balance is Ksh5,941.22. Transaction cost, Ksh23.00. Amount you can transact within the day is 296,283.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ3
</td>
<td style="text-align:center;">
Pay Bill Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
9:57
</td>
<td style="text-align:center;">
21
</td>
<td style="text-align:center;">
57
</td>
<td style="text-align:center;">
Afternoon
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ4 Confirmed. Ksh607.00 paid to SUPERMARKET FULANI HAPO. on 23/4/21 at 3:26 PM.New M-PESA balance is Ksh6,494.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,813.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ4
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
3:26
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
26
</td>
<td style="text-align:center;">
Afternoon
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ5 Confirmed. Ksh1,030.00 sent to MSEE FULANI HAPO +254722222222 on 23/4/21 at 2:38 PM. New M-PESA balance is Ksh7. Transaction cost, Ksh22.00. Amount you can transact within the day is 297,420.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ5
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
2:38
</td>
<td style="text-align:center;">
14
</td>
<td style="text-align:center;">
38
</td>
<td style="text-align:center;">
Afternoon
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ6 Confirmed.on 23/4/21 at 12:31 PMWithdraw Ksh1,500.00 from 010000 - Shop fulani hapo New M-PESA balance is Ksh8. Transaction cost, Ksh28.00. Amount you can transact within the day is 298,500.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ6
</td>
<td style="text-align:center;">
Withdrawal
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
12:31
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
31
</td>
<td style="text-align:center;">
Afternoon
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ9 Confirmed. Ksh80.00 sent to MSEE WA CHIPO 0704444444 on 12/4/21 at 1:57 PM. New M-PESA balance is Ksh 210. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,665.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ9
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-12
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
Monday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
1:57
</td>
<td style="text-align:center;">
13
</td>
<td style="text-align:center;">
57
</td>
<td style="text-align:center;">
Afternoon
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ10 Confirmed. Ksh700.00 paid to GEL NAIL SHOP. on 17/3/21 at 6:54 PM.New M-PESA balance is Ksh3,646.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,300.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ10
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-03-17
</td>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
Wednesday
</td>
<td style="text-align:center;">
March
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
6:54
</td>
<td style="text-align:center;">
18
</td>
<td style="text-align:center;">
54
</td>
<td style="text-align:center;">
Afternoon
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ11 Confirmed. On 25/7/20 at 3:29 PM Give Ksh2,000.00 cash to Agent fulani New M-PESA balance is Ksh2,100.22.
</td>
<td style="text-align:center;">
XXXYYYZZZ11
</td>
<td style="text-align:center;">
Deposit
</td>
<td style="text-align:center;">
2020-07-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Saturday
</td>
<td style="text-align:center;">
July
</td>
<td style="text-align:center;">
2020
</td>
<td style="text-align:center;">
3:29
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
29
</td>
<td style="text-align:center;">
Afternoon
</td>
</tr>
</tbody>
</table>
</div>
<div id="transaction-amount" class="section level4">
<h4>2.5 Transaction amount</h4>
<pre class="r"><code>df &lt;- df %&gt;% 
  mutate(temp = gsub(&quot;New M-PESA balance is.*&quot;, &quot;&quot;, `Text message`)) %&gt;% 
  mutate(trn_amount = str_extract(temp, &quot;(?&lt;=^| )Ksh.*?(?=$| )&quot;)) %&gt;% 
  mutate(trn_amount = as.numeric(trimws(gsub(&quot;Ksh|Kshs|,&quot;, &quot;&quot;, 
                                             trn_amount)))) %&gt;% 
  select(-temp)

tab_output(df)</code></pre>
<table class="table" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
Text message
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_code
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_type
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_date
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_day
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_dayofweek
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_month
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_year
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_time
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_hour
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_minute
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_timeofday
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_amount
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
XXXYYYZZZ1 confirmed.You bought Ksh100.00 of airtime on 27/4/21 at 11:05 AM.New M-PESA balance is Ksh5,350.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,900.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ1
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-27
</td>
<td style="text-align:center;">
27
</td>
<td style="text-align:center;">
Tuesday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
11:05
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
Morning
</td>
<td style="text-align:center;">
100
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ2 confirmed.You bought Ksh30.00 of airtime on 25/4/21 at 3:45 PM.New M-PESA balance is Ksh5,450.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,940.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ2
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Sunday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
3:45
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
30
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ3 Confirmed. Ksh500.00 sent to KPLC PREPAID for account 123456789 on 23/4/21 at 9:57 PM New M-PESA balance is Ksh5,941.22. Transaction cost, Ksh23.00. Amount you can transact within the day is 296,283.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ3
</td>
<td style="text-align:center;">
Pay Bill Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
9:57
</td>
<td style="text-align:center;">
21
</td>
<td style="text-align:center;">
57
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
500
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ4 Confirmed. Ksh607.00 paid to SUPERMARKET FULANI HAPO. on 23/4/21 at 3:26 PM.New M-PESA balance is Ksh6,494.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,813.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ4
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
3:26
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
26
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
607
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ5 Confirmed. Ksh1,030.00 sent to MSEE FULANI HAPO +254722222222 on 23/4/21 at 2:38 PM. New M-PESA balance is Ksh7. Transaction cost, Ksh22.00. Amount you can transact within the day is 297,420.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ5
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
2:38
</td>
<td style="text-align:center;">
14
</td>
<td style="text-align:center;">
38
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
1030
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ6 Confirmed.on 23/4/21 at 12:31 PMWithdraw Ksh1,500.00 from 010000 - Shop fulani hapo New M-PESA balance is Ksh8. Transaction cost, Ksh28.00. Amount you can transact within the day is 298,500.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ6
</td>
<td style="text-align:center;">
Withdrawal
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
12:31
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
31
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
1500
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ9 Confirmed. Ksh80.00 sent to MSEE WA CHIPO 0704444444 on 12/4/21 at 1:57 PM. New M-PESA balance is Ksh 210. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,665.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ9
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-12
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
Monday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
1:57
</td>
<td style="text-align:center;">
13
</td>
<td style="text-align:center;">
57
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
80
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ10 Confirmed. Ksh700.00 paid to GEL NAIL SHOP. on 17/3/21 at 6:54 PM.New M-PESA balance is Ksh3,646.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,300.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ10
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-03-17
</td>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
Wednesday
</td>
<td style="text-align:center;">
March
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
6:54
</td>
<td style="text-align:center;">
18
</td>
<td style="text-align:center;">
54
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
700
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ11 Confirmed. On 25/7/20 at 3:29 PM Give Ksh2,000.00 cash to Agent fulani New M-PESA balance is Ksh2,100.22.
</td>
<td style="text-align:center;">
XXXYYYZZZ11
</td>
<td style="text-align:center;">
Deposit
</td>
<td style="text-align:center;">
2020-07-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Saturday
</td>
<td style="text-align:center;">
July
</td>
<td style="text-align:center;">
2020
</td>
<td style="text-align:center;">
3:29
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
29
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
2000
</td>
</tr>
</tbody>
</table>
</div>
<div id="transaction-cost" class="section level4">
<h4>2.6 Transaction cost</h4>
<pre class="r"><code>df &lt;- df %&gt;% 
  mutate(trn_cost = ifelse(trn_type == &quot;Deposit&quot;,&quot;0.00&quot;,
                       gsub(&quot;.*Transaction cost|. Amount you can transact.*|,|Ksh|\\.$&quot;, &quot;&quot;,
                            `Text message`))) %&gt;% 
  mutate(trn_cost = as.numeric(trimws(trn_cost))) 
tab_output(df)</code></pre>
<table class="table" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
Text message
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_code
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_type
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_date
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_day
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_dayofweek
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_month
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_year
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_time
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_hour
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_minute
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_timeofday
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_amount
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_cost
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
XXXYYYZZZ1 confirmed.You bought Ksh100.00 of airtime on 27/4/21 at 11:05 AM.New M-PESA balance is Ksh5,350.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,900.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ1
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-27
</td>
<td style="text-align:center;">
27
</td>
<td style="text-align:center;">
Tuesday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
11:05
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
Morning
</td>
<td style="text-align:center;">
100
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ2 confirmed.You bought Ksh30.00 of airtime on 25/4/21 at 3:45 PM.New M-PESA balance is Ksh5,450.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,940.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ2
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Sunday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
3:45
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ3 Confirmed. Ksh500.00 sent to KPLC PREPAID for account 123456789 on 23/4/21 at 9:57 PM New M-PESA balance is Ksh5,941.22. Transaction cost, Ksh23.00. Amount you can transact within the day is 296,283.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ3
</td>
<td style="text-align:center;">
Pay Bill Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
9:57
</td>
<td style="text-align:center;">
21
</td>
<td style="text-align:center;">
57
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
500
</td>
<td style="text-align:center;">
23
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ4 Confirmed. Ksh607.00 paid to SUPERMARKET FULANI HAPO. on 23/4/21 at 3:26 PM.New M-PESA balance is Ksh6,494.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,813.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ4
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
3:26
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
26
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
607
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ5 Confirmed. Ksh1,030.00 sent to MSEE FULANI HAPO +254722222222 on 23/4/21 at 2:38 PM. New M-PESA balance is Ksh7. Transaction cost, Ksh22.00. Amount you can transact within the day is 297,420.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ5
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
2:38
</td>
<td style="text-align:center;">
14
</td>
<td style="text-align:center;">
38
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
1030
</td>
<td style="text-align:center;">
22
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ6 Confirmed.on 23/4/21 at 12:31 PMWithdraw Ksh1,500.00 from 010000 - Shop fulani hapo New M-PESA balance is Ksh8. Transaction cost, Ksh28.00. Amount you can transact within the day is 298,500.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ6
</td>
<td style="text-align:center;">
Withdrawal
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
12:31
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
31
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
1500
</td>
<td style="text-align:center;">
28
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ9 Confirmed. Ksh80.00 sent to MSEE WA CHIPO 0704444444 on 12/4/21 at 1:57 PM. New M-PESA balance is Ksh 210. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,665.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ9
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-12
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
Monday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
1:57
</td>
<td style="text-align:center;">
13
</td>
<td style="text-align:center;">
57
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
80
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ10 Confirmed. Ksh700.00 paid to GEL NAIL SHOP. on 17/3/21 at 6:54 PM.New M-PESA balance is Ksh3,646.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,300.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ10
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-03-17
</td>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
Wednesday
</td>
<td style="text-align:center;">
March
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
6:54
</td>
<td style="text-align:center;">
18
</td>
<td style="text-align:center;">
54
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
700
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ11 Confirmed. On 25/7/20 at 3:29 PM Give Ksh2,000.00 cash to Agent fulani New M-PESA balance is Ksh2,100.22.
</td>
<td style="text-align:center;">
XXXYYYZZZ11
</td>
<td style="text-align:center;">
Deposit
</td>
<td style="text-align:center;">
2020-07-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Saturday
</td>
<td style="text-align:center;">
July
</td>
<td style="text-align:center;">
2020
</td>
<td style="text-align:center;">
3:29
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
29
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
2000
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
</table>
</div>
<div id="m-pesa-balance" class="section level4">
<h4>2.7 M-Pesa balance</h4>
<pre class="r"><code>df &lt;- df %&gt;% 
  mutate(temp = gsub(&quot;.*New M-PESA balance is&quot;, &quot;&quot;, `Text message`),
         temp = gsub(&quot;Transaction cost.*|\\..*&quot;, &quot;&quot;, temp)) %&gt;% 
  mutate(trn_balance = as.numeric(trimws(gsub(&quot;Ksh|Kshs|,|\\.&quot;, &quot;&quot;, temp)))) %&gt;% 
  select(-temp)
tab_output(df)</code></pre>
<table class="table" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
Text message
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_code
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_type
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_date
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_day
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_dayofweek
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_month
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_year
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_time
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_hour
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_minute
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_timeofday
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_amount
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_cost
</th>
<th style="text-align:center;font-weight: bold;color: black !important;background-color: pink !important;">
trn_balance
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
XXXYYYZZZ1 confirmed.You bought Ksh100.00 of airtime on 27/4/21 at 11:05 AM.New M-PESA balance is Ksh5,350.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,900.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ1
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-27
</td>
<td style="text-align:center;">
27
</td>
<td style="text-align:center;">
Tuesday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
11:05
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
Morning
</td>
<td style="text-align:center;">
100
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
5350
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ2 confirmed.You bought Ksh30.00 of airtime on 25/4/21 at 3:45 PM.New M-PESA balance is Ksh5,450.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,940.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ2
</td>
<td style="text-align:center;">
Airtime Purchase
</td>
<td style="text-align:center;">
2021-04-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Sunday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
3:45
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
45
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
30
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
5450
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ3 Confirmed. Ksh500.00 sent to KPLC PREPAID for account 123456789 on 23/4/21 at 9:57 PM New M-PESA balance is Ksh5,941.22. Transaction cost, Ksh23.00. Amount you can transact within the day is 296,283.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ3
</td>
<td style="text-align:center;">
Pay Bill Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
9:57
</td>
<td style="text-align:center;">
21
</td>
<td style="text-align:center;">
57
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
500
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
5941
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ4 Confirmed. Ksh607.00 paid to SUPERMARKET FULANI HAPO. on 23/4/21 at 3:26 PM.New M-PESA balance is Ksh6,494.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,813.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ4
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
3:26
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
26
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
607
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
6494
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ5 Confirmed. Ksh1,030.00 sent to MSEE FULANI HAPO +254722222222 on 23/4/21 at 2:38 PM. New M-PESA balance is Ksh7. Transaction cost, Ksh22.00. Amount you can transact within the day is 297,420.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ5
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
2:38
</td>
<td style="text-align:center;">
14
</td>
<td style="text-align:center;">
38
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
1030
</td>
<td style="text-align:center;">
22
</td>
<td style="text-align:center;">
7
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ6 Confirmed.on 23/4/21 at 12:31 PMWithdraw Ksh1,500.00 from 010000 - Shop fulani hapo New M-PESA balance is Ksh8. Transaction cost, Ksh28.00. Amount you can transact within the day is 298,500.00.
</td>
<td style="text-align:center;">
XXXYYYZZZ6
</td>
<td style="text-align:center;">
Withdrawal
</td>
<td style="text-align:center;">
2021-04-23
</td>
<td style="text-align:center;">
23
</td>
<td style="text-align:center;">
Friday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
12:31
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
31
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
1500
</td>
<td style="text-align:center;">
28
</td>
<td style="text-align:center;">
8
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ9 Confirmed. Ksh80.00 sent to MSEE WA CHIPO 0704444444 on 12/4/21 at 1:57 PM. New M-PESA balance is Ksh 210. Transaction cost, Ksh0.00. Amount you can transact within the day is 296,665.00. SAFARICOM ONLY CALLS YOU FROM 0722000000. To reverse, forward this message to 456.
</td>
<td style="text-align:center;">
XXXYYYZZZ9
</td>
<td style="text-align:center;">
Customer Transfer
</td>
<td style="text-align:center;">
2021-04-12
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
Monday
</td>
<td style="text-align:center;">
April
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
1:57
</td>
<td style="text-align:center;">
13
</td>
<td style="text-align:center;">
57
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
80
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
210
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ10 Confirmed. Ksh700.00 paid to GEL NAIL SHOP. on 17/3/21 at 6:54 PM.New M-PESA balance is Ksh3,646.22. Transaction cost, Ksh0.00. Amount you can transact within the day is 299,300.00.You can now access M-PESA via *334#
</td>
<td style="text-align:center;">
XXXYYYZZZ10
</td>
<td style="text-align:center;">
Merchant Payment
</td>
<td style="text-align:center;">
2021-03-17
</td>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
Wednesday
</td>
<td style="text-align:center;">
March
</td>
<td style="text-align:center;">
2021
</td>
<td style="text-align:center;">
6:54
</td>
<td style="text-align:center;">
18
</td>
<td style="text-align:center;">
54
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
700
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
3646
</td>
</tr>
<tr>
<td style="text-align:center;">
XXXYYYZZZ11 Confirmed. On 25/7/20 at 3:29 PM Give Ksh2,000.00 cash to Agent fulani New M-PESA balance is Ksh2,100.22.
</td>
<td style="text-align:center;">
XXXYYYZZZ11
</td>
<td style="text-align:center;">
Deposit
</td>
<td style="text-align:center;">
2020-07-25
</td>
<td style="text-align:center;">
25
</td>
<td style="text-align:center;">
Saturday
</td>
<td style="text-align:center;">
July
</td>
<td style="text-align:center;">
2020
</td>
<td style="text-align:center;">
3:29
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
29
</td>
<td style="text-align:center;">
Afternoon
</td>
<td style="text-align:center;">
2000
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
2100
</td>
</tr>
</tbody>
</table>
<style>
body {text-align: justify}
</style>
</div>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/r/">R</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=http://localhost:4321/post/mpesa/&amp;text=Extracting%20crucial%20details%20from%20M-Pesa%20text%20messages" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=http://localhost:4321/post/mpesa/&amp;t=Extracting%20crucial%20details%20from%20M-Pesa%20text%20messages" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Extracting%20crucial%20details%20from%20M-Pesa%20text%20messages&amp;body=http://localhost:4321/post/mpesa/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=http://localhost:4321/post/mpesa/&amp;title=Extracting%20crucial%20details%20from%20M-Pesa%20text%20messages" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Extracting%20crucial%20details%20from%20M-Pesa%20text%20messages%20http://localhost:4321/post/mpesa/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=http://localhost:4321/post/mpesa/&amp;title=Extracting%20crucial%20details%20from%20M-Pesa%20text%20messages" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  


















  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/project/mi/">Marketing Intelligence</a></li>
      
      <li><a href="/project/eb/">Web Analytics</a></li>
      
      <li><a href="/post/passa/">Data Manipulation using Tidyverse</a></li>
      
      <li><a href="/project/30daymapchallenge2021/">30DayMapChallenge</a></li>
      
      <li><a href="/project/wb_wdi/">World Development Indicators (Africa)</a></li>
      
    </ul>
  </div>
  





  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.cd45a9c0bbdd3dfb1c126917c601c9f2.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
    
  </p>
  

  <p class="powered-by">
    2024
  </p>

  
  






  <p class="powered-by">
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
