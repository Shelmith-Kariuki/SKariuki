<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Introduction Zindi is the first data science competition platform in Africa.">

  
  <link rel="alternate" hreflang="en-us" href="https://shelkariukiold.netlify.com/post/dfk/">

  


  
  
  
  <meta name="theme-color" content="#ff3860">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu30558f93f7e3d0389666c2d677ebedec_445115_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu30558f93f7e3d0389666c2d677ebedec_445115_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://shelkariukiold.netlify.com/post/dfk/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@Shel_Kariuki">
  <meta property="twitter:creator" content="@Shel_Kariuki">
  
  <meta property="og:site_name" content="Shel Kariuki">
  <meta property="og:url" content="https://shelkariukiold.netlify.com/post/dfk/">
  <meta property="og:title" content="Data Fest Kampala (R Training) | Shel Kariuki">
  <meta property="og:description" content="Introduction Zindi is the first data science competition platform in Africa."><meta property="og:image" content="https://shelkariukiold.netlify.com/post/dfk/featured.jpg">
  <meta property="twitter:image" content="https://shelkariukiold.netlify.com/post/dfk/featured.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-03-07T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2019-03-07T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://shelkariukiold.netlify.com/post/dfk/"
  },
  "headline": "Data Fest Kampala (R Training)",
  
  "image": [
    "https://shelkariukiold.netlify.com/post/dfk/featured.jpg"
  ],
  
  "datePublished": "2019-03-07T00:00:00Z",
  "dateModified": "2019-03-07T00:00:00Z",
  
  "publisher": {
    "@type": "Organization",
    "name": "Shel Kariuki",
    "logo": {
      "@type": "ImageObject",
      "url": "https://shelkariukiold.netlify.com/images/icon_hu30558f93f7e3d0389666c2d677ebedec_445115_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Introduction Zindi is the first data science competition platform in Africa."
}
</script>

  

  


  


  





  <title>Data Fest Kampala (R Training) | Shel Kariuki</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Shel Kariuki</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Shel Kariuki</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/blogspage"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/projectspage"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/talkspage"><span>Talks</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/files/Shelmith_Kariuki_2021CV.pdf"><span>Resume</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/contactpage"><span>Contact</span></a>
        </li>

        
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/"><span></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Data Fest Kampala (R Training)</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Mar 7, 2019
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    6 min read
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/r/">R</a></span>
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="//rmarkdown-libs/header-attrs/header-attrs.js"></script>
<link href="//rmarkdown-libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="//rmarkdown-libs/anchor-sections/anchor-sections.js"></script>
<script src="//rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="//rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<p><img src="Images/DFK%20Image.PNG" width="100%" /></p>
<div id="introduction" class="section level3">
<h3>Introduction</h3>
<p>Zindi is the first data science competition platform in Africa. Zindi hosts an entire data science ecosystem of scientists, engineers, academics, companies, NGOs, governments and institutions focused on solving Africa’s most pressing problems.
The data used herein comes from the Data Science Nigeria Loan Prediction challenge,hosted on Zindi, whose details can be found <a href="http://zindi.africa/competitions/data-science-nigeria-challenge-1-loan-default-prediction">here.</a></p>
<p><strong>Disclaimer</strong>: This script does not involve any machine learning. The data has been used to train some tidyverse packages.</p>
</div>
<div id="load-the-libraries-packages-required" class="section level3">
<h3>0. Load the libraries (packages) required</h3>
<pre class="r"><code>
## Create a vector of the required libraries
  ### dplyr: Manipulating datasets
  ### lubridate: Dealing with dates
  ### tidyr: Reshaping data
  ### ggplot: Plotting beautiful plots

pkgs &lt;- c(&quot;dplyr&quot;,&quot;lubridate&quot;,&quot;tidyr&quot;,&quot;ggplot2&quot;,&quot;stringr&quot;,&quot;kableExtra&quot;,
          &quot;DT&quot;,&quot;ggthemes&quot;)

## Check if there are variables you want to load, that are not already installed. 
miss_pkgs &lt;- pkgs[!pkgs %in% installed.packages()[,1]] 

## Installing the missing packages
if(length(miss_pkgs)&gt;0){
  install.packages(miss_pkgs)
}

## Loading all the packages
invisible(lapply(pkgs,library,character.only=TRUE))

## Remove the objects that are no longer required
rm(miss_pkgs)
rm(pkgs)</code></pre>
</div>
<div id="setting-the-plot-theme" class="section level3">
<h3>1. Setting the plot theme</h3>
<pre class="r"><code>kampala_theme&lt;-  theme(legend.position = &quot;right&quot;, 
                 legend.direction = &quot;vertical&quot;,
                 legend.title = element_blank(),
                 legend.text = element_text(size =rel(1.4),angle = 0),
                 plot.title = element_text( size = rel(1.8), hjust = 0.5),
                plot.subtitle = element_text(size = rel(1.4), hjust = 0.5),
                 #axis.text = element_text( size = rel(1.5)),
                 axis.text.x = element_text(size =rel(1.4),angle = 0),
                 axis.text.y = element_text(size =rel(1.4),angle = 0),
                 axis.title = element_text( size = rel(1.5)),
                 panel.background = element_rect(fill = NA))</code></pre>
</div>
<div id="read-in-the-datasets" class="section level3">
<h3>2. Read in the datasets</h3>
<pre class="r"><code>
## Create an object containing the path, where the data is saved

### Please change the path to suit the location of your datasets
data_path &lt;- &quot;DSN Zindi LoanDataset&quot;

df &lt;- read.csv(paste(data_path, &quot;traindemographics.csv&quot;,sep=&quot;/&quot;))

## List the files that are in that directory

dsn_challenge_files &lt;-list.files(data_path, pattern = &quot;.csv&quot;)
dsn_challenge_files
#&gt; [1] &quot;SampleSubmission.csv&quot;  &quot;testdemographics.csv&quot;  &quot;testperf.csv&quot;         
#&gt; [4] &quot;testprevloans.csv&quot;     &quot;traindemographics.csv&quot; &quot;trainperf.csv&quot;        
#&gt; [7] &quot;trainprevloans.csv&quot;

## Generate an empty list that will hold the datasets

dsn_challenge &lt;- list()

## Read in the datasets

for(i in 1: length(dsn_challenge_files)){
  
  ## Read in each dataset, one by one
  dsn_challenge[[i]]&lt;-read.csv(paste(data_path, dsn_challenge_files[i],sep = &quot;/&quot;))
  
  ## Remove the &quot;.csv&quot; from the name
  dsn_challenge_files[i] &lt;- gsub(&quot;.csv&quot;,&quot;&quot;,dsn_challenge_files[i])
  
  ## Assign each dataset a name, as is in the directory
  assign(dsn_challenge_files[i], dsn_challenge[[i]])

}

## Remove the objects that we do not need

rm(i)
rm(dsn_challenge)
rm(dsn_challenge_files)
rm(testdemographics)
rm(testperf)
rm(testprevloans)
rm(SampleSubmission)</code></pre>
</div>
<div id="handling-duplicates" class="section level3">
<h3>3. Handling duplicates</h3>
<pre class="r"><code>
## Check whether the traindemographic dataset has unique customer ids
length(unique(traindemographics$customerid))
#&gt; [1] 4334

## Inspect the duplicate records
which(duplicated(traindemographics$customerid))
#&gt;  [1]  160  518  777 1016 1091 1189 1481 1929 1997 4127 4267 4287

## View(traindemographics$customerid[which(duplicated(traindemographics$customerid))])

## Drop the duplicates, and only keep unique records
traindemographics &lt;- traindemographics %&gt;% 
                          unique()</code></pre>
</div>
<div id="generating-more-demographic-variables" class="section level3">
<h3>4. Generating more demographic variables</h3>
<pre class="r"><code>
## set.seed ensures that the sampling code is reproducible
set.seed(7032018)


## Generate gender
gender&lt;- sample(c(&quot;Male&quot;,&quot;Female&quot;), nrow(traindemographics), replace = T)
traindemographics$gender &lt;- gender

## Generate State
state &lt;- sample(c(&quot;Oyo&quot;,&quot;Bauchi&quot;,&quot;Enugu&quot;,&quot;Lagos&quot;,&quot;Ogun&quot;,&quot;Kadun&quot;), nrow(traindemographics),replace = T)
traindemographics$state&lt;-state

## Age
  ### Convert to character
traindemographics$birthdate&lt;-as.character(traindemographics$birthdate)

  ### Split the string variable o remove unnecessary information
traindemographics$birthdate&lt;-substr(traindemographics$birthdate,1,10)

  ### Convert the data to date format
traindemographics$birthdate &lt;- ymd(traindemographics$birthdate)

  ### Generate age
traindemographics$age&lt;-as.numeric(ceiling(difftime(ymd(20180101),traindemographics$birthdate,&quot;days&quot;)/365))

## Remove unnecessary objects
rm(gender)
rm(i)
rm(state)</code></pre>
</div>
<div id="generating-new-variables-based-on-conditions-of-another-variable" class="section level3">
<h3>5. Generating new variables, based on conditions of another variable</h3>
<pre class="r"><code>
## Age Categories
traindemographics &lt;- traindemographics %&gt;% 
  mutate(age_category = ifelse(age&gt;=21 &amp; age&lt;=30,&quot;21-30&quot;,
                         ifelse(age&gt;=31 &amp; age&lt;=40,&quot;31-40&quot;,
                         ifelse(age&gt;=41 &amp; age&lt;=60,&quot;41-60&quot;,&quot;&quot;))))
table(traindemographics$age_category)
#&gt; 
#&gt; 21-30 31-40 41-60 
#&gt;  1352  2368   614</code></pre>
</div>
<div id="generating-summary-statistics-for-one-categorical-variables" class="section level3">
<h3>6. Generating summary statistics for one categorical variables</h3>
<pre class="r"><code>## Age

### Generate a summary statistics table
summ_table &lt;- traindemographics %&gt;% 
  group_by(age_category) %&gt;% 
  summarise(count = n()) %&gt;% 
  mutate(perc = round((count/sum(count))*100,0))

### Print the summary statistics table
kable_styling(kable(summ_table,col.names = c(&quot;Age Categories&quot;,&quot;Frequency&quot;,&quot;Percentage&quot;)))</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Age Categories
</th>
<th style="text-align:right;">
Frequency
</th>
<th style="text-align:right;">
Percentage
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
21-30
</td>
<td style="text-align:right;">
1352
</td>
<td style="text-align:right;">
31
</td>
</tr>
<tr>
<td style="text-align:left;">
31-40
</td>
<td style="text-align:right;">
2368
</td>
<td style="text-align:right;">
55
</td>
</tr>
<tr>
<td style="text-align:left;">
41-60
</td>
<td style="text-align:right;">
614
</td>
<td style="text-align:right;">
14
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>
### Generate a graph based on the summary table shown above

summ_graph &lt;- ggplot(summ_table, aes(x=age_category,y=perc))+
              geom_bar(stat = &quot;identity&quot;, fill=&quot;brown&quot;)+
              geom_text(aes(label =perc),vjust = -0.25, size = 4)+
              kampala_theme+
              labs(title = &quot;Distribution of Age&quot;,x=&quot;Age Categories&quot;,
                   y=&quot;Percentage&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-8-1.png" width="768" /></p>
</div>
<div id="generating-summary-statistics-for-several-categorical-variables" class="section level3">
<h3>7. Generating summary statistics for several categorical variables</h3>
<pre class="r"><code>
## Generate a function that produces a table, and a graph
summ_function &lt;- function(xvar, xlab,title){
  
  ### Generate a summary statistics table
summ_table &lt;- traindemographics %&gt;% 
  group_by_(xvar) %&gt;% 
  summarise(count = n()) %&gt;% 
  mutate(perc = round((count/sum(count))*100,0))

### Print the summary statistics table
kable_styling(kable(summ_table,col.names = c(xlab,&quot;Frequency&quot;,&quot;Percentage&quot;)))

### Generate a graph based on the summary table shown above

summ_graph &lt;- ggplot(summ_table, aes_string(x=xvar,y=&quot;perc&quot;))+
              geom_bar(stat = &quot;identity&quot;, fill=&quot;brown&quot;)+
              geom_text(aes(label =perc),vjust = -0.25, size = 4)+
              kampala_theme+
              labs(title = paste(&quot;Distribution of&quot;,title),x=xlab,
                   y=&quot;Percentage&quot;)
print(summ_graph)
  
}

## Generate a vector containing tha variables whose summary statistics you want to obtain.

vars&lt;- c(&quot;bank_account_type&quot;,&quot;gender&quot;,&quot;age_category&quot;,&quot;state&quot;)
xlabs&lt;-c(&quot;Bank Account Type&quot;,&quot;Gender&quot;,&quot;Age Categories&quot;,&quot;States&quot;)
for(i in 1: length(vars)){
  summ_function(vars[i],xlabs[i],xlabs[i])
}</code></pre>
<p><img src="figs/unnamed-chunk-9-1.png" width="768" /><img src="figs/unnamed-chunk-9-2.png" width="768" /><img src="figs/unnamed-chunk-9-3.png" width="768" /><img src="figs/unnamed-chunk-9-4.png" width="768" /></p>
<pre class="r"><code>
##Remove unnecessary objects
rm(summ_graph)
rm(summ_table)
rm(xlabs)
rm(vars)</code></pre>
</div>
<div id="append-the-trainprevloans-dataset-with-the-trainperf-loans-dataset" class="section level3">
<h3>8. Append the trainprevloans dataset with the trainperf loans dataset</h3>
<pre class="r"><code>## We want to keep the column names that are in both datasets

vars &lt;- names(trainprevloans)[which(names(trainprevloans) %in% names(trainperf))]
vars</code></pre>
<p>[1] “customerid” “systemloanid” “loannumber” “approveddate” “creationdate”
[6] “loanamount” “totaldue” “termdays” “referredby”</p>
<pre class="r"><code>
## Subset the two datasets, to only contain the selected variables

trainprevloans &lt;- trainprevloans %&gt;% 
  select(vars)

trainperf &lt;- trainperf %&gt;% 
  select(vars)

## Append the two datasets

trainloans &lt;- bind_rows(trainprevloans, trainperf)

## Remove the datasets that we no longer need

rm(trainprevloans)
rm(trainperf)</code></pre>
</div>
<div id="merge-with-the-traindemographics-dataset" class="section level3">
<h3>9. Merge with the traindemographics dataset</h3>
<pre class="r"><code>
demo_loans_data &lt;- right_join(traindemographics, trainloans, by=&quot;customerid&quot;)

## Remove unwanted objects
rm(traindemographics)
rm(trainloans)</code></pre>
</div>
<div id="determine-the-number-of-loans-applied-each-year-each-month-each-day-of-the-month-and-each-hour" class="section level3">
<h3>10. Determine the number of loans applied each year, each month, each day of the month, and each hour</h3>
<pre class="r"><code>## We assume that the creation date represents the date when the loan was applied.

## Convert the creation date to date time format

demo_loans_data$creationdate&lt;-substr(as.character(demo_loans_data$creationdate),1,19)
demo_loans_data$creationdate&lt;-ymd_hms(demo_loans_data$creationdate)

## Generate time variables from the creation date

demo_loans_data &lt;- demo_loans_data %&gt;% 
  mutate(App_Year = factor(year(creationdate)),
         App_Month = month(creationdate,label = T,abbr = T),
         App_Day = day(creationdate),
         App_DoW = wday(creationdate,label = T, abbr = T),
         App_Hour = hour(creationdate))</code></pre>
</div>
<div id="generate-a-time-series-graph-that-shows-the-number-of-loans-applied." class="section level3">
<h3>11. Generate a time series graph that shows the number of loans applied.</h3>
<pre class="r"><code>
time_function &lt;- function(xvar, xlab,title){
  

summ_table &lt;- demo_loans_data %&gt;%
  distinct(customerid, loannumber,.keep_all = T) %&gt;% 
  group_by_(xvar) %&gt;% 
  summarise(count = n())

kable_styling(kable(summ_table,col.names = c(xlab,&quot;Count&quot;)))

summ_graph &lt;- ggplot(summ_table, aes_string(x=xvar, y=&quot;count&quot;, group=1, color=1))+
  geom_line(stat = &quot;identity&quot;,color = &quot;brown&quot;) + 
  kampala_theme+
  labs(title = paste(&quot;Number of Loans Applied \n per \n&quot;,title),x=xlab,
                   y=&quot;Count&quot;)
print(summ_graph)

}

xvars&lt;-c(&quot;App_Year&quot;,&quot;App_Day&quot;,&quot;App_DoW&quot;,&quot;App_Hour&quot;)
xlabs&lt;-c(&quot;Year&quot;,&quot;Day of Month&quot;,&quot;Day of Week&quot;,&quot;Hour&quot;)
xtitles&lt;-xlabs

for(i in 1: length(xvars)){
  time_function(xvars[i],xlabs[i], xtitles[i])
}</code></pre>
<p><img src="figs/unnamed-chunk-13-1.png" width="768" /><img src="figs/unnamed-chunk-13-2.png" width="768" /><img src="figs/unnamed-chunk-13-3.png" width="768" /><img src="figs/unnamed-chunk-13-4.png" width="768" /></p>
</div>
<div id="generate-a-time-series-graph-that-shows-the-number-of-loans-applied-per-loan-term." class="section level3">
<h3>12. Generate a time series graph that shows the number of loans applied, per loan term.</h3>
<pre class="r"><code>
## Add the word &quot;days&quot; to the termdays variable
demo_loans_data$termdays&lt;- paste(demo_loans_data$termdays,&quot;days&quot;)

## Convert loanterm days to a factor variable
demo_loans_data$termdays&lt;- factor(demo_loans_data$termdays)



time_function &lt;- function(xvar,gvar,xlab, gvarlab, title){
  

summ_table &lt;- demo_loans_data %&gt;%
  distinct(customerid, loannumber,.keep_all = T) %&gt;% 
  group_by_(xvar,gvar) %&gt;% 
  summarise(count = n())

kable_styling(kable(summ_table,col.names = c(xlab,gvarlab,&quot;Count&quot;)))

summ_graph &lt;- ggplot(summ_table, aes_string(x=xvar, y=&quot;count&quot;, group=gvar, color=gvar))+
  geom_line(stat = &quot;identity&quot;) + 
  kampala_theme+
  scale_color_brewer(palette = &quot;Spectral&quot;)+
  labs(title = paste(&quot;Number of Loans Applied \n per \n&quot;,title),x=xlab,
                   y=&quot;Count&quot;)
print(summ_graph)

}

xvars&lt;-c(&quot;App_Year&quot;,&quot;App_Day&quot;,&quot;App_DoW&quot;,&quot;App_Hour&quot;)
gvars&lt;-c(&quot;termdays&quot;)
xlabs&lt;-c(&quot;Year&quot;,&quot;Day of Month&quot;,&quot;Day of Week&quot;,&quot;Hour&quot;)
gvarlabs&lt;-c(&quot;Loan Term&quot;)
xtitles&lt;-xlabs

for(i in 1: length(xvars)){
  for(j in 1: length(gvars)){
  time_function(xvars[i],gvars[j],xlabs[i],gvarlabs[j],xtitles[i])
  }
}</code></pre>
<p><img src="figs/unnamed-chunk-14-1.png" width="768" /><img src="figs/unnamed-chunk-14-2.png" width="768" /><img src="figs/unnamed-chunk-14-3.png" width="768" /><img src="figs/unnamed-chunk-14-4.png" width="768" /></p>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/r-markdown/">R Markdown</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://shelkariukiold.netlify.com/post/dfk/&amp;text=Data%20Fest%20Kampala%20%28R%20Training%29" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://shelkariukiold.netlify.com/post/dfk/&amp;t=Data%20Fest%20Kampala%20%28R%20Training%29" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Data%20Fest%20Kampala%20%28R%20Training%29&amp;body=https://shelkariukiold.netlify.com/post/dfk/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://shelkariukiold.netlify.com/post/dfk/&amp;title=Data%20Fest%20Kampala%20%28R%20Training%29" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Data%20Fest%20Kampala%20%28R%20Training%29%20https://shelkariukiold.netlify.com/post/dfk/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://shelkariukiold.netlify.com/post/dfk/&amp;title=Data%20Fest%20Kampala%20%28R%20Training%29" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/avatar_hubc1f6cfd80a3e5aa5176d464d1c32c28_52181_270x270_fill_q90_lanczos_center.jpeg" alt="">
      

      <div class="media-body">
        <h5 class="card-title"><a href="https://shelkariukiold.netlify.com/"></a></h5>
        <h6 class="card-subtitle">Senior Data Analyst</h6>
        
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/Shel_Kariuki" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/Shelmith-Kariuki" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="live:kariukishelmith" >
        <i class="fab fa-skype"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/shelmith-kariuki-44351363/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  














  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/firstmap/">Creating Maps in R</a></li>
      
      <li><a href="/post/factorvariables/">Factorizing variables in R</a></li>
      
      <li><a href="/post/ttests/">One sample t-tests</a></li>
      
    </ul>
  </div>
  





  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.b2ed8054531fc8b77a9c500d5dfef876.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    ©2024
  </p>

  
  






  <p class="powered-by">
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
