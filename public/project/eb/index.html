<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Company_XXX is an online company that meets the growing demand for independent travel information. it offers an extensive hotel meta search to travellers.">

  
  <link rel="alternate" hreflang="en-us" href="/project/eb/">

  


  
  
  
  <meta name="theme-color" content="#ff3860">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu30558f93f7e3d0389666c2d677ebedec_445115_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu30558f93f7e3d0389666c2d677ebedec_445115_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/project/eb/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@Shel_Kariuki">
  <meta property="twitter:creator" content="@Shel_Kariuki">
  
  <meta property="og:site_name" content="Shel Kariuki">
  <meta property="og:url" content="/project/eb/">
  <meta property="og:title" content="Web Analytics | Shel Kariuki">
  <meta property="og:description" content="Company_XXX is an online company that meets the growing demand for independent travel information. it offers an extensive hotel meta search to travellers."><meta property="og:image" content="/project/eb/featured.jpg">
  <meta property="twitter:image" content="/project/eb/featured.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-08-19T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2019-08-19T00:00:00&#43;00:00">
  

  


    









<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/project/eb/"
  },
  "headline": "Web Analytics",
  
  "image": [
    "/project/eb/featured.jpg"
  ],
  
  "datePublished": "2019-08-19T00:00:00Z",
  "dateModified": "2019-08-19T00:00:00Z",
  
  "publisher": {
    "@type": "Organization",
    "name": "Shel Kariuki",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/icon_hu30558f93f7e3d0389666c2d677ebedec_445115_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Company_XXX is an online company that meets the growing demand for independent travel information. it offers an extensive hotel meta search to travellers."
}
</script>

  

  


  


  





  <title>Web Analytics | Shel Kariuki</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Shel Kariuki</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Shel Kariuki</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/blogspage"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/projectspage"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/talkspage"><span>Talks</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/codework"><span>Codes</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/contactpage"><span>Contact</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/files/cv.pdf"><span>CV</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  <article class="article article-project">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>Web Analytics</h1>

  
  <p class="page-subtitle">Company_XXX Case Study</p>
  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Aug 19, 2019
  </span>
  

  

  

  
  
  

  
  

</div>

  














</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 251px;">
  <div style="position: relative">
    <img src="/project/eb/featured_hu0eb1b8b96692c3f1193eddf4c6578f36_44910_720x0_resize_q90_lanczos.jpg" alt="" class="featured-image">
    
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="//rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="//rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="//rmarkdown-libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="//rmarkdown-libs/datatables-binding/datatables.js"></script>
<link href="//rmarkdown-libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="//rmarkdown-libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="//rmarkdown-libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="//rmarkdown-libs/dt-ext-buttons/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="//rmarkdown-libs/dt-ext-buttons/js/dataTables.buttons.min.js"></script>
<script src="//rmarkdown-libs/dt-ext-buttons/js/buttons.flash.min.js"></script>
<script src="//rmarkdown-libs/dt-ext-buttons/js/buttons.html5.min.js"></script>
<script src="//rmarkdown-libs/dt-ext-buttons/js/buttons.colVis.min.js"></script>
<script src="//rmarkdown-libs/dt-ext-buttons/js/buttons.print.min.js"></script>
<link href="//rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="//rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>


<p>Company_XXX is an online company that meets the growing demand for independent travel information. it offers an extensive hotel meta search to travellers.</p>
<p>Company_XXX hosts different case studies on their website, that job applicants can work on.</p>
<p>Task:
<em>The task consists of user visit data, stored as a csv.</em>
<em>First, we would like you to perform some descriptive analysis of the data at hand. What can you tell us about the visits that are included? Imagine that you want to understand our product and think about what would be important for you. Explore the data, get a feel for how it is structured and show us what you can do. Some topics you may want to look into are:</em></p>
<p><em>What is good for the product, what is bad?</em>
+ <em>Anomalies in data</em>
+ <em>Inferences from the data</em></p>
<p><em>Secondly define three KPI’s for the performance of the product and show how they are calculated. Describe what you see and try to think about why these developments might be happening. Define plausible reasons for any changes you might observe in the data.</em></p>
<pre class="r"><code>## Install the libraries required

## create a vector of packages to be installed
pkgs &lt;- c(&quot;tidyverse&quot;,&quot;data.table&quot;,&quot;DT&quot;,&quot;lubridate&quot;,&quot;ggthemes&quot;)

## Check if there are packages you want to load, that are not already installed. 
miss_pkgs &lt;- pkgs[!pkgs %in% installed.packages()[,1]] 

## Installing the missing packages
if(length(miss_pkgs)&gt;0){
  install.packages(miss_pkgs)
}
## Loading all the packages
invisible(lapply(pkgs,library,character.only=TRUE))

## Remove the objects that are no longer required
rm(miss_pkgs)
rm(pkgs)</code></pre>
<p><br></p>
<pre class="r"><code>### Setting the plot theme
Company_XXX_theme&lt;- theme_hc()+ theme(legend.position = &quot;right&quot;, 
                 legend.direction = &quot;vertical&quot;,
                 #legend.title = element_blank(),
                 plot.title = element_text( size = rel(1.6), hjust = 0.5),
                plot.subtitle = element_text(size = rel(1.5), hjust = 0.5),
                 #axis.text = element_text( size = rel(1.5)),
                 axis.text.x = element_text(size =rel(1.5),angle = 0),
                 axis.text.y = element_text(size =rel(1.5),angle = 0),
                 axis.title = element_text( size = rel(1.55)),
                axis.line.x = element_line(size = 1.5, colour = &quot;#c94a38&quot;),
                 panel.background = element_rect(fill = NA))

### Colours that will be used for the plots 
Company_XXX_blue = &quot;#007faf&quot;
Company_XXX_orange = &quot;#c94a38&quot;
Company_XXX_yellow = &quot;#f48f00&quot;

## Avoidance of scientific numbers
options(scipen = 999)

## Printing function
pr_func&lt;-function(data,cnames){
datatable(data,colnames = cnames,
  extensions = &#39;Buttons&#39;, options = list(
    dom = &#39;Bfrtip&#39;,
    buttons = c(&#39;copy&#39;, &#39;print&#39;)
  )
)
}</code></pre>
<pre class="r"><code>
## Read in the datasets
page_log &lt;- read_csv(&quot;../../../../../PersonalDevelopment/page_log.csv&quot;)
 
visit_caseStudy &lt;- read_delim(&quot;../../../../../PersonalDevelopment/visit_caseStudy.csv&quot;,&quot;;&quot;, escape_double = FALSE, trim_ws = TRUE)</code></pre>
<div id="task-1" class="section level3">
<h3>Task 1</h3>
<p>The first part of the challenge involved analysis of user visit data.</p>
<p>The data provided is only one day’s worth, as is shown by the minimum timestamp, i.e 2018-06-13 and maximum timestamp, i.e 2018-06-13 23:59:59</p>
<p>The data contains 142599 unique participants, and a total of 156638 unique sessions, meaning on average
1.1 sessions per user.</p>
<p>The analysis sought to answer the following questions:</p>
<ul>
<li><p>On average, how many times did users visit the website?</p></li>
<li><p>Of those who visited the website only once, how many made successive bookings?</p></li>
<li><p>Of those who visited the website more than once, what was the rate of successful bookings?</p></li>
<li><p>Where are most of the website users based?</p></li>
<li><p>Is there a trend in website visit times? Do users prefer visiting the website in the morning, afternoon or evening?</p></li>
<li><p>Generally, what is the length of time between the booking date and start of travel date?</p></li>
<li><p>What is the distribution of advertisers</p></li>
<li><p>Which advertiser results into a majority of booking errors?</p></li>
<li><p>For those who only visit the website once and never succeed in booking, how far along is the travel date from the booking date? Is it that they do not log in again because the trip is not that urgent?</p></li>
<li><p>For those who visited the website more than once, what is the average length of time between the first visit and second visit?</p></li>
<li><p>For those who re-visit the website within one hour, after how many minutes do they do so?</p></li>
<li><p>For those who visited the website more than once and were not successful in making a booking in the first instance, after how many trials (sessions) were they successful?</p></li>
</ul>
<div id="on-average-how-many-times-did-users-visit-the-website" class="section level4">
<h4>1. On average, how many times did users visit the website?</h4>
<p>From the plot given below, a majority of the users (94%) visited the website only once. I would be keen to find out whether they made successive bookings.</p>
<p><em>Note: The graph has been truncated to only display information for those who visited the website less than 7 times</em></p>
<p><br></p>
<pre class="r"><code>
## Table
summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id) %&gt;% 
  group_by(tracking_id) %&gt;% 
  summarise(frequency = n()) %&gt;% 
  ungroup() %&gt;% 
  group_by(frequency) %&gt;% 
  summarise(count = n()) %&gt;% 
  mutate(perc = round((count/sum(count))*100,0)) 

## Print the table

pr_func(summ_tab,cnames = c(&quot;Number of Log-Ins&quot;,&quot;Frequency&quot;,&quot;Percentage&quot;) )</code></pre>
<div id="htmlwidget-1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,30],[133815,6107,1448,673,253,147,60,33,20,13,10,4,4,1,1,2,2,2,2,2],[94,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Number of Log-Ins<\/th>\n      <th>Frequency<\/th>\n      <th>Percentage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[1,2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>

## Graph
summ_graph &lt;- ggplot(summ_tab%&gt;% filter(frequency &lt;6), aes(x=frequency,y=count))+
              geom_bar(stat = &quot;identity&quot;, fill=Company_XXX_yellow)+
              geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Distribution of Website Visits&quot;,x=&quot;Number of Log-Ins&quot;,
                   y=&quot;Frequency&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-4-2.png" width="1152" /></p>
</div>
<div id="of-those-who-visited-the-website-only-once-how-many-made-successive-bookings" class="section level4">
<h4>2. Of those who visited the website only once, how many made successive bookings?</h4>
<p>A majority (98%) of those who only visited the website once did not succeed in making a booking.</p>
<p><br></p>
<pre class="r"><code>## Table
summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  group_by(tracking_id) %&gt;% 
  mutate(frequency = n()) %&gt;% 
  filter(frequency==1) %&gt;% 
  ungroup() %&gt;% 
  mutate(bookingOk = ifelse(bookingOk==0,&quot;No&quot;,&quot;Yes&quot;)) %&gt;% 
  group_by(bookingOk) %&gt;% 
  summarise(count = n()) %&gt;% 
  mutate(perc = round((count/sum(count))*100,0))

## Print the table

pr_func(summ_tab,cnames = c(&quot;Ok Booking&quot;,&quot;Frequency&quot;,&quot;Percentage&quot;) )</code></pre>
<div id="htmlwidget-2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2"],["No","Yes"],[131560,2255],[98,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Ok Booking<\/th>\n      <th>Frequency<\/th>\n      <th>Percentage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>

## Graph
summ_graph &lt;- ggplot(summ_tab, aes(x=bookingOk,y=count,fill=bookingOk))+
              geom_bar(stat = &quot;identity&quot;)+
              geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
  scale_fill_manual(values = c(Company_XXX_yellow, Company_XXX_blue))+
              labs(title = &quot;Distribution of Successive Bookings&quot;,x=&quot;&quot;,
                   y=&quot;Frequency&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-5-2.png" width="1152" /></p>
</div>
<div id="of-those-who-visited-the-website-more-than-once-what-was-the-rate-of-successful-bookings" class="section level4">
<h4>3. Of those who visited the website more than once, what was the rate of successful bookings?</h4>
<p><br></p>
<pre class="r"><code>summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  group_by(tracking_id) %&gt;% 
  mutate(frequency = n()) %&gt;% 
  filter(frequency!=1) %&gt;% 
  ungroup() %&gt;% 
  mutate(bookingOk = ifelse(bookingOk==0,&quot;No&quot;,&quot;Yes&quot;)) %&gt;% 
  group_by(frequency,bookingOk) %&gt;% 
  summarise(count = n()) %&gt;% 
  mutate(perc = round((count/sum(count))*100,0))


## Print the table

pr_func(summ_tab,cnames = c(&quot;Number of Log-Ins&quot;,&quot;Ok Booking&quot;,&quot;Frequency&quot;,&quot;Percentage&quot;) )</code></pre>
<div id="htmlwidget-3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34"],[2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,13,13,14,15,16,16,17,17,18,20,20,30,30],["No","Yes","No","Yes","No","Yes","No","Yes","No","Yes","No","Yes","No","Yes","No","Yes","No","Yes","No","Yes","No","No","Yes","No","No","No","Yes","No","Yes","No","No","Yes","No","Yes"],[11954,260,4269,75,2657,35,1250,15,876,6,417,3,258,6,176,4,125,5,109,1,48,51,1,14,15,31,1,32,2,36,39,1,59,1],[98,2,98,2,99,1,99,1,99,1,99,1,98,2,98,2,96,4,99,1,100,98,2,100,100,97,3,94,6,100,98,2,98,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Number of Log-Ins<\/th>\n      <th>Ok Booking<\/th>\n      <th>Frequency<\/th>\n      <th>Percentage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[1,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>

## Graph
summ_graph &lt;- ggplot(summ_tab%&gt;% filter(frequency &lt;6), aes(x=frequency,y=count,color=bookingOk))+
              geom_line(stat = &quot;identity&quot;)+
              #geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              scale_color_manual(values = c(Company_XXX_yellow, Company_XXX_blue))+
              labs(title = &quot;Distribution of Bookings&quot;,x=&quot;&quot;,
                   y=&quot;Frequency&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-6-2.png" width="1152" /></p>
</div>
<div id="where-are-most-of-the-website-users-based" class="section level4">
<h4>4. Where are most of the website users based?</h4>
<p>A majority of the website users are based in US, followed by IT.
<br></p>
<pre class="r"><code>summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  group_by(locale) %&gt;% 
  summarise(count = n()) %&gt;% 
  arrange(desc(count)) %&gt;% 
  mutate(perc = round((count/sum(count))*100,0))

## Print the table

pr_func(summ_tab,cnames = c(&quot;Locale&quot;,&quot;Frequency&quot;,&quot;Percentage&quot;) )</code></pre>
<div id="htmlwidget-4" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45"],["US","IT","DE","ES","FR","GB","MX","GR","PT","PL","AU","TR","NL","NZ","CA","BE","AT","BR","RU","CH","AR","SE","IE","IN","FI","DK","NO","CL","CO","RO","AE","ZA","CZ","MY","PH","UY","HK","PE","SG","EC","TH","AA",null,"ID","EN"],[17472,17417,16478,14681,12388,11990,11132,8123,6107,4999,4712,4634,4297,2793,2599,2486,1606,1510,1406,1228,1090,1055,815,802,706,643,468,460,430,334,305,266,243,228,170,123,108,103,83,77,36,33,8,2,1],[11,11,11,9,8,8,7,5,4,3,3,3,3,2,2,2,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Locale<\/th>\n      <th>Frequency<\/th>\n      <th>Percentage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>

## Graph
summ_graph &lt;- ggplot(summ_tab %&gt;% filter(count&gt;5000), aes(x=locale,y=count))+
              geom_bar(stat = &quot;identity&quot;,fill = Company_XXX_yellow)+
              geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Distribution of Users \nby\n Locaion&quot;,x=&quot;Hour&quot;,
                   y=&quot;Frequency&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-7-2.png" width="1152" /></p>
</div>
<div id="is-there-a-trend-in-website-visit-times-do-users-prefer-visiting-the-website-in-the-morning-afternoon-or-evening" class="section level4">
<h4>5. Is there a trend in website visit times? Do users prefer visiting the website in the morning, afternoon or evening?</h4>
<p>A majority of users visit the website in the afternoon.
<br></p>
<pre class="r"><code>summ_tab &lt;- visit_caseStudy %&gt;% 
  mutate(hour = hour(date)) %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  group_by(hour) %&gt;% 
  summarise(frequency = length(unique(session_id))) 

## Print the table

pr_func(summ_tab,cnames = c(&quot;Hour&quot;,&quot;Frequency&quot;) )</code></pre>
<div id="htmlwidget-5" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],[3607,2862,2774,2721,2645,2992,3780,4939,6100,6957,7059,7269,7558,8348,8575,9321,9678,9898,9790,9994,9662,8686,6571,4853]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Hour<\/th>\n      <th>Frequency<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>

## Graph
summ_graph &lt;- ggplot(summ_tab, aes(x=hour,y=frequency,group=1, color=1))+
              geom_line(stat = &quot;identity&quot;,color = Company_XXX_yellow)+
              #geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Distribution of Website Visits \n by \n Time of Day &quot;,x=&quot;Hour&quot;,
                   y=&quot;Frequency&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-8-2.png" width="1152" /></p>
</div>
<div id="generally-what-is-the-length-of-time-between-the-booking-date-and-start-of-travel-date" class="section level4">
<h4>6. Generally, what is the length of time between the booking date and start of travel date?</h4>
<p>A majority of users tend to make bookings a few days to the actual travel date.
<br></p>
<pre class="r"><code> summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  mutate(bookingOk = ifelse(bookingOk==0,&quot;No&quot;,&quot;Yes&quot;)) %&gt;% 
  group_by(tracking_id) %&gt;% 
  mutate(frequency = n()) %&gt;% 
  mutate(diff_days = difftime(travelStartDate, as.Date(date), units=&quot;days&quot;)) %&gt;% 
  group_by(diff_days)%&gt;% 
  summarise(count = n()) 
 

## Graph
summ_graph &lt;- ggplot(summ_tab, aes(x=diff_days,y=count,group=1, color=1))+
              geom_line(stat = &quot;identity&quot;,color = Company_XXX_yellow)+
              #geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Length of time \n beween \n Booking Date and Travel Start Date &quot;,x=&quot;Length (days)&quot;,y=&quot;Frequency&quot;)+ylim(c(0,6000))+xlim(c(0,200))
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-9-1.png" width="1152" /></p>
</div>
<div id="distribution-of-advertisers" class="section level4">
<h4>7. Distribution of advertisers</h4>
<p>A majority of the website site clicks are on advertisers D7A8, followed by CEFA.
<br></p>
<pre class="r"><code>summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  group_by(advertiser) %&gt;% 
  summarise(count = n()) 


## Print the table
pr_func(summ_tab,cnames = c(&quot;Advertiser&quot;,&quot;Frequency&quot;))</code></pre>
<div id="htmlwidget-6" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73"],["0233","0266","077E","0FF3","11D0","19F3","1CD1","20D1","2491","28B6","2A50","2CBC","2F4F","33E7","3614","3953","3C94","3CEC","3D86","4E0C","4EBC","5055","539F","555D","5938","5A14","5FA9","6244","6403","6E62","6EA2","7180","71E0","735B","78F7","81B3","852C","884C","8BD3","8C30","8CB2","8E82","9431","952C","9B04","A29D","A6EA","A784","AB23","AD71","B1A5","B7A7","B9D4","BE53","C429","C59B","CBB6","CEFA","CFA0","CFCD","D7A8","D89F","D964","DB9E","DCF6","E165","EDA8","EE8F","F3D9","F473","F61D","F708","FE13"],[4860,5501,242,82,6,2527,3127,200,2863,8,2330,1134,2259,3,630,54,8,2016,3827,906,1299,47,5765,833,354,2571,1,2824,90,98,36,552,44,662,1856,195,1437,8,16,29,12436,2646,2,205,134,1,243,1697,4,15770,360,198,4739,167,2,3595,32,16881,468,8,22822,5,196,970,2365,1614,3537,440,59,12863,107,724,57]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Advertiser<\/th>\n      <th>Frequency<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>
## Graph
summ_graph &lt;- ggplot(summ_tab %&gt;%filter(count&gt;5000), aes(x=advertiser,y=count))+
              geom_bar(stat = &quot;identity&quot;,fill = Company_XXX_yellow)+
              geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Distribution of advertisers&quot;,x=&quot;Advertisers&quot;,
                   y=&quot;Frequency&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-10-2.png" width="1152" /></p>
</div>
<div id="which-advertiser-results-into-a-majority-of-booking-errors" class="section level4">
<h4>8. Which advertiser results into a majority of booking errors</h4>
<p>The top 5 advertisers that result into booking errors are 539F, 555D, 5A14,78F7 and 8E82.</p>
<p><br></p>
<pre class="r"><code>summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  group_by(advertiser) %&gt;% 
  summarise(count = n(),
            sum_errors = round(sum(bookingError!=0)/count*1000,1),
            sum_oks = round(sum(bookingOk!=0)/count*1000,1)) 


## Print the table
pr_func(summ_tab,cnames = c(&quot;Advertiser&quot;,&quot;Frequency&quot;,&quot;Error Rate&quot;,&quot;Success Rate&quot;))</code></pre>
<div id="htmlwidget-7" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73"],["0233","0266","077E","0FF3","11D0","19F3","1CD1","20D1","2491","28B6","2A50","2CBC","2F4F","33E7","3614","3953","3C94","3CEC","3D86","4E0C","4EBC","5055","539F","555D","5938","5A14","5FA9","6244","6403","6E62","6EA2","7180","71E0","735B","78F7","81B3","852C","884C","8BD3","8C30","8CB2","8E82","9431","952C","9B04","A29D","A6EA","A784","AB23","AD71","B1A5","B7A7","B9D4","BE53","C429","C59B","CBB6","CEFA","CFA0","CFCD","D7A8","D89F","D964","DB9E","DCF6","E165","EDA8","EE8F","F3D9","F473","F61D","F708","FE13"],[4860,5501,242,82,6,2527,3127,200,2863,8,2330,1134,2259,3,630,54,8,2016,3827,906,1299,47,5765,833,354,2571,1,2824,90,98,36,552,44,662,1856,195,1437,8,16,29,12436,2646,2,205,134,1,243,1697,4,15770,360,198,4739,167,2,3595,32,16881,468,8,22822,5,196,970,2365,1614,3537,440,59,12863,107,724,57],[2.9,6.2,0,0,0,2.4,7.7,0,0.3,0,4.7,0.9,8.4,0,3.2,0,0,2,1.8,7.7,0.8,0,17.7,16.8,0,13.6,0,5.3,0,0,0,0,0,1.5,10.2,0,2.1,0,0,0,2.7,10.2,0,0,0,0,0,1.2,0,6.8,2.8,0,0.4,0,0,2.2,0,1.7,0,0,6.4,0,0,0,0.4,3.1,9.3,0,0,4.5,0,1.4,0],[8.2,25.8,8.3,12.2,0,28.5,10.2,0,25.1,0,26.6,7.1,12.4,0,30.2,18.5,0,23.3,6.3,8.8,2.3,42.6,42.8,38.4,8.5,15.9,0,11.3,44.4,0,27.8,1.8,45.5,9.1,11.3,25.6,11.8,0,0,0,10.5,27.6,0,24.4,7.5,0,4.1,5.3,0,10.5,36.1,0,9.1,6,0,9.5,31.2,24.5,8.5,0,12.9,0,15.3,9.3,14,29.1,18.9,6.8,0,26,9.3,9.7,35.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Advertiser<\/th>\n      <th>Frequency<\/th>\n      <th>Error Rate<\/th>\n      <th>Success Rate<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>
## Graph
summ_graph &lt;- ggplot(summ_tab %&gt;%filter(sum_errors&gt;5), 
                     aes(x=advertiser,y=sum_errors,group=1))+
  geom_line(stat = &quot;identity&quot;,color = Company_XXX_yellow)+
              geom_text(aes(label =sum_errors),vjust = -0.25, size = 5,color = Company_XXX_blue)+
              Company_XXX_theme+
              labs(title = &quot;Booking Error Rates&quot;,x=&quot;Advertisers&quot;,
                   y=&quot;Booking error rate (in 000s)&quot;)

summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-11-2.png" width="1152" /></p>
<pre class="r"><code>
## Graph
summ_graph2 &lt;- ggplot(summ_tab %&gt;%filter(sum_oks&gt;25), 
                     aes(x=advertiser,y=sum_oks,group=1))+
  geom_line(stat = &quot;identity&quot;,color = Company_XXX_yellow)+
              geom_text(aes(label =sum_oks),vjust = -0.25, size = 5,color = Company_XXX_blue)+
              Company_XXX_theme+
              labs(title = &quot;Booking Success Rates&quot;,x=&quot;Advertisers&quot;,
                   y=&quot;Booking success rate (in 000s)&quot;)

summ_graph2</code></pre>
<p><img src="figs/unnamed-chunk-11-3.png" width="1152" /></p>
</div>
<div id="for-those-who-only-visit-the-website-once-and-never-succeed-in-booking-how-far-along-is-the-travel-date-from-the-booking-date-is-it-that-they-do-not-log-in-again-because-the-trip-is-not-that-urgent" class="section level4">
<h4>9. For those who only visit the website once and never succeed in booking, how far along is the travel date from the booking date? Is it that they do not log in again because the trip is not that urgent?</h4>
<p>A majority of users will mostly visit the website when their travel date is a few days away from the booking date.</p>
<p><br></p>
<pre class="r"><code> summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  mutate(bookingOk = ifelse(bookingOk==0,&quot;No&quot;,&quot;Yes&quot;)) %&gt;% 
  group_by(tracking_id) %&gt;% 
  mutate(frequency = n()) %&gt;% 
  filter(frequency==1 &amp; bookingOk !=&quot;Yes&quot;) %&gt;% 
  mutate(diff_days = difftime(travelStartDate, as.Date(date), units=&quot;days&quot;)) %&gt;% 
  group_by(diff_days)%&gt;% 
  summarise(count = n()) 


## Graph
summ_graph &lt;- ggplot(summ_tab, aes(x=diff_days,y=count,group=1, color=1))+
              geom_line(stat = &quot;identity&quot;,color = Company_XXX_yellow)+
              #geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Length of time \n beween \nBooking Date and Travel Start Date &quot;,x=&quot;Length (days)&quot;,y=&quot;Frequency&quot;)+ylim(c(0,6000))+xlim(c(0,200))
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-12-1.png" width="1152" /></p>
</div>
<div id="for-those-who-visited-the-website-more-than-once-what-is-the-average-length-of-time-between-the-first-visit-and-second-visit" class="section level4">
<h4>10. For those who visited the website more than once, what is the average length of time between the first visit and second visit?</h4>
<p>A majority of them revisit the website in an hour’s time.</p>
<pre class="r"><code> summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  mutate(bookingOk = ifelse(bookingOk==0,&quot;No&quot;,&quot;Yes&quot;)) %&gt;% 
  group_by(tracking_id) %&gt;% 
  mutate(frequency = n()) %&gt;% 
  filter(frequency &gt;1) %&gt;% 
  group_by(tracking_id) %&gt;% 
  arrange(date) %&gt;% 
  mutate(diff_hours = zoo::na.locf0(round(difftime(lead(date), date, units=&quot;hours&quot;),0)))%&gt;% 
  distinct(tracking_id, diff_hours) %&gt;% 
  mutate(seq = seq_along(tracking_id)) %&gt;% 
  filter(seq == 1) %&gt;% 
  ungroup() %&gt;% 
  group_by(diff_hours) %&gt;% 
  summarise(count = n())%&gt;% 
  mutate(perc = round((count/sum(count))*100,0)) %&gt;% 
  ungroup() %&gt;% mutate(diff_hours = as.factor(diff_hours))

## Print the table
pr_func(summ_tab,cnames = c(&quot;Difference in time (hours)&quot;,&quot;Frequency&quot;,&quot;Percentage&quot;))</code></pre>
<div id="htmlwidget-8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],[4079,1189,688,517,405,305,231,233,193,187,142,105,115,81,71,45,56,28,21,24,22,18,16,12,1],[46,14,8,6,5,3,3,3,2,2,2,1,1,1,1,1,1,0,0,0,0,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Difference in time (hours)<\/th>\n      <th>Frequency<\/th>\n      <th>Percentage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>

## Graph
summ_graph &lt;- ggplot(summ_tab %&gt;%filter(perc&gt;3), aes(x=diff_hours,y=perc))+
              geom_bar(stat = &quot;identity&quot;,fill = Company_XXX_yellow)+
              geom_text(aes(label =perc),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;&quot;,x=&quot;Difference in time (hours)&quot;,
                   y=&quot;Percentage&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-13-2.png" width="1152" /></p>
</div>
<div id="for-those-who-re-visit-the-website-within-one-hour-after-how-many-minutes-do-they-do-so" class="section level4">
<h4>11. For those who re-visit the website within one hour, after how many minutes do they do so?</h4>
<p>A majority of them revisit the website within the same minute.
<br></p>
<pre class="r"><code> summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  mutate(bookingOk = ifelse(bookingOk==0,&quot;No&quot;,&quot;Yes&quot;)) %&gt;% 
  group_by(tracking_id) %&gt;% 
  mutate(frequency = n()) %&gt;% 
  filter(frequency &gt;1) %&gt;% 
  group_by(tracking_id) %&gt;% 
  arrange(date) %&gt;% 
  mutate(diff_hours = zoo::na.locf0(round(difftime(lead(date), date, units=&quot;hours&quot;),0)),
         diff_mins = zoo::na.locf0(round(difftime(lead(date), date, units=&quot;min&quot;),0)))%&gt;% 
  distinct(tracking_id, diff_hours,diff_mins) %&gt;% 
  mutate(seq = seq_along(tracking_id)) %&gt;% 
  filter(seq == 1) %&gt;% 
  filter(diff_hours == 0) %&gt;% 
  ungroup() %&gt;% 
  group_by(diff_mins) %&gt;% 
  summarise(count = n())%&gt;% 
  mutate(perc = round((count/sum(count))*100,0)) %&gt;% 
  ungroup() %&gt;% mutate(diff_mins = as.factor(diff_mins))

## Print the table
pr_func(summ_tab,cnames = c(&quot;Difference in time (mins)&quot;,&quot;Frequency&quot;,&quot;Percentage&quot;))</code></pre>
<div id="htmlwidget-9" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],[936,638,389,260,207,155,136,118,103,97,80,65,83,64,52,59,52,52,46,50,49,52,37,35,43,46,50,38,35,36,16],[23,16,10,6,5,4,3,3,3,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Difference in time (mins)<\/th>\n      <th>Frequency<\/th>\n      <th>Percentage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>

## Graph
summ_graph &lt;- ggplot(summ_tab %&gt;%filter(perc&gt;3), aes(x=diff_mins,y=perc))+
              geom_bar(stat = &quot;identity&quot;,fill = Company_XXX_yellow)+
              geom_text(aes(label =perc),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;&quot;,x=&quot;Difference in time (mins)&quot;,
                   y=&quot;Percentage&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-14-2.png" width="1152" /></p>
</div>
<div id="for-those-who-visited-the-website-more-than-once-and-were-not-successful-in-making-a-booking-in-the-first-instance-after-how-many-trials-sessions-were-they-successful" class="section level4">
<h4>12. For those who visited the website more than once and were not successful in making a booking in the first instance, after how many trials (sessions) were they successful?</h4>
<p><br>
A majority of the users succeed in making a booking after the second trial.</p>
<pre class="r"><code> summ_tab &lt;- visit_caseStudy %&gt;% 
  distinct(tracking_id, session_id,.keep_all = TRUE) %&gt;% 
  mutate(bookingOk = ifelse(bookingOk==0,&quot;No&quot;,&quot;Yes&quot;)) %&gt;% 
  group_by(tracking_id) %&gt;% 
  mutate(frequency = n()) %&gt;% 
  filter(frequency &gt;1) %&gt;% 
  group_by(tracking_id) %&gt;% 
  arrange(date) %&gt;% 
  distinct(tracking_id, session_id, bookingPriceTotal) %&gt;% 
  mutate(seq = seq_along(bookingPriceTotal)) %&gt;% 
  mutate(Trials = ifelse(sum(bookingPriceTotal)==0,0,NA)) %&gt;% 
  mutate(Trials = ifelse(bookingPriceTotal!=0,seq,Trials)) %&gt;% 
  arrange(tracking_id) %&gt;% 
  distinct(tracking_id, Trials) %&gt;% 
  filter(!is.na(Trials)) %&gt;% 
  distinct(tracking_id, .keep_all = T) %&gt;% ungroup() %&gt;% 
  group_by(Trials) %&gt;% 
  summarise(count = n())%&gt;% 
  mutate(perc = round((count/sum(count))*100,0))
  
 ## Print the table
pr_func(summ_tab,cnames = c(&quot;Number of trials&quot;,&quot;Frequency&quot;,&quot;Percentage&quot;))</code></pre>
<div id="htmlwidget-10" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-10">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],[0,1,2,3,4,5,6,7,8,9,10,11,16,19,29],[8381,129,180,46,21,8,7,2,4,1,1,1,1,1,1],[95,1,2,1,0,0,0,0,0,0,0,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Number of trials<\/th>\n      <th>Frequency<\/th>\n      <th>Percentage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[1,2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code> 

## Graph
summ_graph &lt;- ggplot(summ_tab %&gt;%filter(count&lt;200), aes(x=Trials,y=count))+
              geom_bar(stat = &quot;identity&quot;,fill = Company_XXX_yellow)+
              geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Number of Trials before Successful Bookings&quot;,x=&quot;Number of Trials&quot;,
                   y=&quot;Frequency&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-15-2.png" width="1152" /></p>
</div>
</div>
<div id="task-2" class="section level3">
<h3>Task 2</h3>
<p>The second part of the challenge involved a dataset showing list of actions, of the users in part 1. Each row in the data corresponds to a logged event</p>
<p>The questions I sought to answer in this task include:</p>
<ul>
<li><p>What actions are common? Can we think how this relates to the Company_XXX Express Booking?</p></li>
<li><p>What are the most common final actions for a user? Why is that?</p></li>
<li><p>How are actions distributed and can we infer anything from that?</p></li>
<li><p>What might be the action that we consider as a conversion? Is there a feasible way to verify that?</p></li>
</ul>
<div id="what-actions-are-common-can-we-think-how-this-relates-to-the-company_xxx-express-booking" class="section level4">
<h4>1. What actions are common? Can we think how this relates to the Company_XXX Express Booking?</h4>
<p><br></p>
<pre class="r"><code>
## Generate a dataset that only contains the page_log_id, tracking_id, session_id and page_id
task2_data &lt;-page_log %&gt;% distinct(page_log_id, tracking_id, session_id, page_id)</code></pre>
<p>A majority of the respondents spend most of their time on Page 9020 and Page 9005.</p>
<p><br></p>
<pre class="r"><code>## Calculate the number of page_log ids for each user and each page
summ_tab &lt;- task2_data %&gt;% 
  group_by(tracking_id, session_id,page_id) %&gt;% 
  summarise(counter = length(unique(page_log_id))) %&gt;% 
  group_by(page_id) %&gt;% 
  summarise(avg_logins = round(mean(counter),1)) %&gt;% ungroup() %&gt;% 
  mutate(page_id = as.factor(page_id))

 ## Print the table
pr_func(summ_tab,cnames = c(&quot;Page_ID&quot;,&quot;Average number of Page_log_IDs&quot;))</code></pre>
<div id="htmlwidget-11" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-11">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5"],["9003","9005","9006","9007","9020"],[1.4,6,2.5,1.6,5.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Page_ID<\/th>\n      <th>Average number of Page_log_IDs<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>
## Graph
summ_graph &lt;- ggplot(summ_tab, aes(x=page_id,y=avg_logins))+
              geom_bar(stat = &quot;identity&quot;,fill = Company_XXX_yellow)+
              geom_text(aes(label =avg_logins),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Average number of Page_log_IDs\n per \n Page ID&quot;,x=&quot;Page ID&quot;,
                   y=&quot;Average&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-17-2.png" width="1152" /></p>
</div>
<div id="what-are-the-most-common-final-actions-for-a-user-why-is-that" class="section level4">
<h4>2. What are the most common final actions for a user? Why is that?</h4>
<p><br></p>
<p>A majority of sessions end on Page ID 9020.</p>
<pre class="r"><code>
summ_tab &lt;- page_log %&gt;% 
  group_by(tracking_id, session_id) %&gt;% 
  arrange(date) %&gt;% 
  mutate(seq= seq_along(session_id)) %&gt;% 
  filter(seq == max(seq)) %&gt;% 
  group_by(page_id) %&gt;% 
  summarise(count = length(unique(session_id)))%&gt;% 
  mutate(page_id = as.factor(page_id))%&gt;% 
  mutate(perc = round((count/sum(count))*100,0))
  
 ## Print the table
pr_func(summ_tab,cnames = c(&quot;Page_ID&quot;,&quot;Frequency&quot;,&quot;Percentage&quot;))</code></pre>
<div id="htmlwidget-12" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-12">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5"],["9003","9005","9006","9007","9020"],[9131,16288,33,2445,125095],[6,11,0,2,82]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Page_ID<\/th>\n      <th>Frequency<\/th>\n      <th>Percentage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code> 
## Graph
summ_graph &lt;- ggplot(summ_tab, aes(x=page_id,y=count))+
              geom_bar(stat = &quot;identity&quot;,fill = Company_XXX_yellow)+
              geom_text(aes(label =count),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Number of session ends\n per \n Page ID&quot;,x=&quot;Page ID&quot;,
                   y=&quot;Frequency&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-18-2.png" width="1152" /></p>
</div>
<div id="how-are-actions-distributed-and-can-you-infer-anything-from-that" class="section level4">
<h4>3. How are actions distributed and can you infer anything from that?</h4>
<p>Almost all sessions end at point 993
<br></p>
<pre class="r"><code>
summ_tab &lt;- page_log %&gt;% 
  group_by(tracking_id, session_id) %&gt;% 
  arrange(date) %&gt;% 
  mutate(seq= seq_along(session_id)) %&gt;% 
  filter(seq == max(seq)) %&gt;% 
  group_by(page_id,type) %&gt;% 
  summarise(count = length(unique(session_id)))%&gt;% 
  group_by(page_id) %&gt;% 
  mutate(perc = round((count/sum(count))*100,0)) %&gt;% ungroup() %&gt;% 
  mutate(page_id = as.factor(page_id)) 
  
 ## Print the table
pr_func(summ_tab,cnames = c(&quot;Page_ID&quot;,&quot;Type&quot;, &quot;Frequency&quot;,&quot;Percentage&quot;))</code></pre>
<div id="htmlwidget-13" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-13">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8"],["9003","9003","9005","9006","9006","9007","9020","9020"],[901,993,993,993,995,993,923,993],[1,9130,16288,32,1,2445,1,125094],[0,100,100,97,3,100,0,100]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Page_ID<\/th>\n      <th>Type<\/th>\n      <th>Frequency<\/th>\n      <th>Percentage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","print"],"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code> 
## Graph
summ_graph &lt;- ggplot(summ_tab%&gt;% filter(type == 993), aes(x=page_id,y=perc))+
              geom_bar(stat = &quot;identity&quot;,fill = Company_XXX_yellow)+
              geom_text(aes(label =perc),vjust = -0.25, size = 5)+
              Company_XXX_theme+
              labs(title = &quot;Number of session ending with 993\n per \n Page ID&quot;,x=&quot;Page ID&quot;,
                   y=&quot;Percentage&quot;)
summ_graph</code></pre>
<p><img src="figs/unnamed-chunk-19-2.png" width="1152" /></p>
</div>
<div id="what-might-be-the-action-that-we-consider-as-a-conversion-is-there-a-feasible-way-to-verify-that" class="section level4">
<h4>4. What might be the action that we consider as a conversion? Is there a feasible way to verify that?</h4>
<p><br></p>
</div>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/r/">R</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/project/eb/&amp;text=Web%20Analytics" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/project/eb/&amp;t=Web%20Analytics" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Web%20Analytics&amp;body=/project/eb/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/project/eb/&amp;title=Web%20Analytics" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Web%20Analytics%20/project/eb/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/project/eb/&amp;title=Web%20Analytics" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/avatar_hubc1f6cfd80a3e5aa5176d464d1c32c28_52181_270x270_fill_q90_lanczos_center.jpeg" alt="">
      

      <div class="media-body">
        <h5 class="card-title"><a href=""></a></h5>
        <h6 class="card-subtitle">Senior Data Analyst</h6>
        
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/Shel_Kariuki" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/Shelmith-Kariuki" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="live:kariukishelmith" >
        <i class="fab fa-skype"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/shelmith-kariuki-44351363/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="/files/cv.pdf" >
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  














  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/project/mi/">Marketing Intelligence</a></li>
      
      <li><a href="/codes/passa/">Data Manipulation</a></li>
      
      <li><a href="/project/adventofcode/">Advent of Code 2020</a></li>
      
      <li><a href="/codes/adventofcode2020/">Advent of Code 2020</a></li>
      
      <li><a href="/post/dataquest/">My interview with Dataquest (Top Tips for Learning R)</a></li>
      
    </ul>
  </div>
  





    <div class="project-related-pages content-widget-hr">
      
      

      
      
      

      
      
      

      
      
      
    </div>
  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
    
  </p>
  

  <p class="powered-by">
    ©2021
  </p>

  
  






  <p class="powered-by">
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
